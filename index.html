<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Pokerbaazi</title>
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  <!-- <script src="https://kit.fontawesome.com/d219319e92.js" crossorigin="anonymous"></script> -->
  <!-- <link rel="preconnect" href="https://fonts.googleapis.com"> -->
  <!-- <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> -->
  <!-- <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100&display=swap" rel="stylesheet"> -->
  <!-- <link rel="icon" href="http://tnemploymentnews.in/wp-content/uploads/2022/03/Yoloo-logo.jpg"> -->

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <section class="vh-100" style="background-color: #eee;">
    <div class="container h-100" style="font-family: Fira Sans;">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-lg-12 col-xl-11">
          <div class="card text-black" style="border-radius: 25px;">
            <div class="card-body">
              <div class="row justify-content-center">
                <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">

                  <p style="color: #041B67;" class="text-center h5 fw-bold mb-2 mx-1 mx-md-4 mt-2">Welcome to <img src="Logo.svg">
                  </p>
                  <br>

                  <form class="mx-1 mx-md-4" action="" onsubmit="return false">

                    <div class="d-flex flex-row align-items-center mb-4 form-div ">
                      
                      <div class="form-outline flex mb-0 name adjust-name">
                        <input type="text" id="input1" class="form-control" name="fname" placeholder=" " required />
                        <label style="font-size: 16px;" id="firstname" class="form-label w-50%" for="input1">Username<sup style="color: red;">*</sup> </label>
                        <img id="user_error_img" style="bottom: 2rem;
                        position: relative;
                        left: 9rem;display: none;" src="Icon.svg">
                        <span id="user_error" style="color: red; display: none; position: relative; bottom: 1.5rem;font-size: 0.7rem;" class="help-block hide">Enter a valid username.</span>
                      </div>
                    </div>





                    <div class="d-flex flex-row align-items-center mb-4">
                     
                      <div class="form-outline flex-fill mb-0">
                        <input type="email" id="input5" class="form-control" name="email" placeholder=" " />
                        <label style="font-size: 16px;" id="email" class="form-label w-50%" for="input5">Registered Email Id</label>
                        <img id= "email_error_img" style="bottom: 2rem;
                        position: relative;
                        left: 6.5rem;display: none;" src="Icon.svg">
                        <span id="email_error" style="color: red; display: none; position: relative; bottom: 1.5rem;font-size: 0.7rem;" class="help-block hide">Enter a valid email address.</span>
                      </div>
                    </div>


                    <div class="d-flex flex-row align-items-center">
                      <div class="form-outline flex-fill mb-0">
                        <input type="tel" id="phone_no" class="form-control" name="phone" placeholder=" " required />
                        <label style="font-size: 16px;" id="phone" class="form-label w-50%" for="phone_no">Registered Contact Number<sup style="color: red;">*</sup></label>
                        <img id="mob_error" style="bottom: 2rem;
                        position: relative;
                        left: 4.5rem;display: none;" src="Icon.svg">
                        <span id="client_id_error" style="color: red; display: none; position: relative; bottom: 1.5rem;font-size: 0.7rem;" class="help-block hide">Enter valid 10 digit Mobile number.</span>
                      </div>
                    </div>
                    

                    <div class="d-flex justify-content-center  mb-3 mb-lg-4 proceed-btn">
                      <button style="color: #f2f6f8; background-color: #A6A7A9;width: -webkit-fill-available;" type="" id="Submit_data" name="submit" class="btn btn-md">Submit</button>
                    </div>


                  </form>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>



      <!-- Option 1: Bootstrap Bundle with Popper -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

  <script>

  $('#input1').focusout(function(){
    // var alpha = /^[A-Za-z]+$/;
    var user_name = $('#input1').val();
    if (is_field_empty(user_name)) {
      $('#input1').css("border-color", "red");
      $('#firstname').css("color", "red");
      $('#user_error').css("display", "block");
      $('#user_error_img').css("display", "initial");
      
    } else {
      $('#input1').css("border-color", "black");
      $('#firstname').css("color", "black");
      $('#user_error, #user_error_img').css("display", "None");
    }
  });
  $('#input1').focusin(function(){
    $('#firstname').css("color", "#208EF7");
  });
  $('#input5').focusout(function(){
    // var alpha = /^[A-Za-z]+$/;
    var email_id =  $('#input5').val();
    if (!is_field_empty(email_id) && !isEmail(email_id)) {
      $('#input5').css("border-color", "red");
      $('#email').css("color", "red");
      $('#email_error').css("display", "block");
      $('#email_error_img').css("display", "initial");
    } else {
      $('#input5').css("border-color", "black");
      $('#email').css("color", "black");
      $('#email_error, #email_error_img').css("display", "None");
    }
  });
  $('#input5').focusin(function(){
    $('#email').css("color", "#208EF7");
  });
  $('#phone_no').focusout(function(){
    // var alpha = /^[A-Za-z]+$/;
    var phone_no =  $('#phone_no').val();
    if (!validate_number(phone_no)) {
      $('#phone_no').css("border-color", "red");
      $('#phone').css("color", "red");
      $('#client_id_error').css("display", "block");
      $('#mob_error').css("display", "initial");
    } else {
      $('#phone_no').css("border-color", "black");
      $('#phone').css("color", "black");
      $('#client_id_error, #mob_error').css("display", "None");
    }
  });
  $('#phone_no').focusin(function(){
    $('#phone').css("color", "#208EF7");
  });

    $('#phone_no, #input5, #input1').keyup(function(){
      if(validate_key_basic_data()){
        $('#Submit_data').css("background-color", "#041B67");
        $('#email_error, #email_error_img, #mob_error, #user_error_img').css("display", "None");
      }else{
        $('#Submit_data').css("background-color", "#A6A7A9");
      }
});

    $(document).on('click', '#Submit_data', function (e) {
      $('#webhook_output').addClass("hide")

      console.log("hello")
      if(validate_basic_data()){
        let user_name = $('#input1').val();
        let email_id = $('#input5').val();
        let phone_no = $('#phone_no').val();

        message = "{api_name: pokerbaazi, user_name: username_" + user_name + ",email_id: " + email_id + ", phone_no:" +phone_no+"}"
        
        
        closeWindow(message)
      }


    });

    function validate_basic_data() {
      let phone_no = $('#phone_no').val();
      let user_name = $('#input1').val();
      let email_id = $('#input5').val();
      let status = true
      if (is_field_empty(phone_no)) {
        status = false
      } 

      if (!is_field_empty(phone_no) && !validate_number(phone_no)) {
        $('#client_id_error').css("display", "block");
        status = false
      } else {
        $('#client_id_error').css("display", "None");
      }

      if (is_field_empty(user_name)) {
        status = false
      } 

      // if (is_field_empty(email_id)) {
      //   status = false
      // } 
      if (!is_field_empty(email_id) && !isEmail(email_id)) {
        $('#email_error').css("display", "block");
        status = false
      }  else {
        $('#email_error').css("display", "None");
      }

      return status
    }

    function validate_number(element_val) {
      const regex = /^\+?91[6-9]\d{9}$|^(\+91)?[6-9]\d{9}$/i
      return regex.test(element_val)
    }
    function is_field_empty(element_val) {
    return (element_val == undefined || element_val == "")
  }
  function isEmail(emailAdress){
    let regex = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;

    if (emailAdress.match(regex)) 
      return true; 
    else 
      return false; 
  }
  

    function closeWindow(message) {
      console.log("CLOSE WINDOW RAN 0255 change the message", message);
      if (window.parent) {
        window.parent.postMessage(`http://haptik-webview//perform-action?action=close&message=${message}&message_type=0`, '*');
      }
    }

    function validate_key_basic_data() {
      let phone_no = $('#phone_no').val();
      let user_name = $('#input1').val();
      let email_id = $('#input5').val();
      let status = true
      if (is_field_empty(phone_no)) {
        status = false
      } 

      if (!is_field_empty(phone_no) && !validate_number(phone_no)) {
        status = false
      }else {
        $('#client_id_error, #mob_error').css("display", "None");
        // $('#phone').css("color", "black");
      }

      if (is_field_empty(user_name)) {
        status = false
      } else{
        $('#user_error, #user_error_img').css("display", "None");
        // $('#firstname').css("color", "black");
      }
      if (!is_field_empty(email_id) && !isEmail(email_id)) {
        status = false
      } else {
        $('#email_error, #email_error_img').css("display", "None");
        // $('#email').css("color", "black");
      }

      return status
    }
  </script>


</body>

</html>